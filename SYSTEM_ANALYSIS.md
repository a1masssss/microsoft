# –ê–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º—ã Microsoft MCP Server

## üìã –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–¢–∏–ø —Å–∏—Å—Ç–µ–º—ã:** Full-stack –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ  
**Backend:** Django 5.2.8 + Django REST Framework  
**Frontend:** React 19.2.0 + TypeScript + Vite + Tailwind CSS  
**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL 15  
**–û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:** MCP (Model Context Protocol) —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å SQL –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ LangChain

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
microsoft/
‚îú‚îÄ‚îÄ backend/              # Django backend
‚îÇ   ‚îú‚îÄ‚îÄ backend/          # –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–µ–∫—Ç Django
‚îÇ   ‚îú‚îÄ‚îÄ mcp/              # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ MCP
‚îÇ   ‚îú‚îÄ‚îÄ telegram/        # Telegram –±–æ—Ç (–ø—É—Å—Ç–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
‚îÇ   ‚îî‚îÄ‚îÄ manage.py
‚îú‚îÄ‚îÄ frontend/             # React frontend
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îî‚îÄ‚îÄ docker-compose.yml    # PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
```

---

## üîç –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### 1. Backend (Django)

#### 1.1. –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (`mcp/models.py`)

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 7 –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π:

##### **MCP Protocol Models (JSON-RPC 2.0)**
- **`OpenAIMCPRequest`** - –•—Ä–∞–Ω–∏—Ç –≤—Ö–æ–¥—è—â–∏–µ MCP –∑–∞–ø—Ä–æ—Å—ã
  - –ü–æ–ª—è: `jsonrpc`, `method`, `params`, `request_id`, `session_id`, `user_id`
  - –ò–Ω–¥–µ–∫—Å—ã: –ø–æ `created_at`, `method`, `session_id`
  
- **`OpenAIMCPResponse`** - –•—Ä–∞–Ω–∏—Ç –æ—Ç–≤–µ—Ç—ã –Ω–∞ MCP –∑–∞–ø—Ä–æ—Å—ã
  - –°–≤—è–∑—å: ForeignKey –∫ `OpenAIMCPRequest`
  - –ü–æ–ª—è: `result`, `error`, `status`, `processing_time_ms`
  - –°—Ç–∞—Ç—É—Å—ã: `success`, `error`, `pending`

##### **LangChain SQL Toolkit Models**
- **`SQLDatabaseConnection`** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ SQL –ë–î
  - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ë–î: PostgreSQL, MySQL, SQLite, MSSQL, Oracle
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∏: `sample_rows_in_table_info`, `include_tables`, `exclude_tables`
  
- **`SQLToolExecution`** - –¢—Ä–µ–∫–∏–Ω–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
  - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: `QuerySQLDataBaseTool`, `InfoSQLDatabaseTool`, `ListSQLDatabaseTool`, `QuerySQLCheckerTool`
  - –•—Ä–∞–Ω–∏—Ç: `tool_input`, `tool_output`, `sql_query`, `query_result`, `execution_time_ms`
  
- **`MCPRequestLog`** - –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ MCP –∑–∞–ø—Ä–æ—Å–æ–≤
  - –ü–æ–ª—è: `function_name`, `user_query`, `sql_query`, `db_response`, `mcp_response`

##### **Tool Schema Registry**
- **`MCPToolSchema`** - –†–µ–µ—Å—Ç—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
  - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: `sql_query`, `sql_info`, `sql_admin`, `general`
  - –•—Ä–∞–Ω–∏—Ç JSON Schema –¥–ª—è –≤—Ö–æ–¥–Ω—ã—Ö/–≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

##### **Session Management**
- **`MCPSession`** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ MCP
  - –°–≤—è–∑—å —Å `SQLDatabaseConnection`
  - –•—Ä–∞–Ω–∏—Ç `context_data` –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–µ—Å—Å–∏–∏

#### 1.2. –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (`mcp/views.py`)

##### **MCP Protocol Views**
- **`MCPProtocolView`** - –û—Å–Ω–æ–≤–Ω–æ–π endpoint –¥–ª—è MCP –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
  - –ú–µ—Ç–æ–¥—ã: `tools/list`, `tools/call`
  - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç JSON-RPC 2.0
  - –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã/–æ—Ç–≤–µ—Ç—ã

##### **Deep Query Views (–¶–µ–ø–æ—á–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π)**
- **`DeepQueryView`** - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ü–µ–ø–æ—á–∫–∏ SQL –æ–ø–µ—Ä–∞—Ü–∏–π
  - –û–ø–µ—Ä–∞—Ü–∏–∏: `list_tables`, `table_info`, `query`
  - –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–µ –≤ —Ü–µ–ø–æ—á–∫–µ
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

##### **Quick Operations**
- **`QuickExploreView`** - –ë—ã—Å—Ç—Ä–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ë–î
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: —Å–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü ‚Üí –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–∞–±–ª–∏—Ü–∞—Ö
  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: –ø–µ—Ä–≤—ã–µ 10 —Ç–∞–±–ª–∏—Ü
  
- **`QuickQueryView`** - –ë—ã—Å—Ç—Ä–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL –∑–∞–ø—Ä–æ—Å–∞
  - –ü—Ä—è–º–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL –±–µ–∑ —Ü–µ–ø–æ—á–∫–∏

##### **ViewSets (CRUD)**
- **`SQLDatabaseConnectionViewSet`** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏
  - Custom action: `test_connection` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  
- **`SQLToolExecutionViewSet`** - –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
  - –§–∏–ª—å—Ç—Ä—ã: `database_id`, `tool_name`, `status`
  
- **`MCPToolSchemaViewSet`** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º–∞–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
  - –§–∏–ª—å—Ç—Ä—ã: `is_active`, `category`
  
- **`MCPSessionViewSet`** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏
  - Custom action: `end_session` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏
  
- **`MCPRequestLogViewSet`** - –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
  - –§–∏–ª—å—Ç—Ä—ã: `function_name`, `should_continue`

##### **Statistics**
- **`MCPStatisticsView`** - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  - –ú–µ—Ç—Ä–∏–∫–∏: –∑–∞–ø—Ä–æ—Å—ã, –æ—Ç–≤–µ—Ç—ã, –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏, –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏
  - –¢–æ–ø –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –∑–∞–ø—Ä–æ—Å—ã –ø–æ –º–µ—Ç–æ–¥–∞–º
  - –§–∏–ª—å—Ç—Ä –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 7 –¥–Ω–µ–π)

#### 1.3. –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã (`mcp/serializers.py`)

- **MCP Protocol Serializers**: `OpenAIMCPRequestSerializer`, `OpenAIMCPResponseSerializer`
- **SQL Toolkit Serializers**: `SQLDatabaseConnectionSerializer` (—Å –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ–º URI), `SQLToolExecutionSerializer`
- **Supporting Serializers**: `MCPToolSchemaSerializer`, `MCPSessionSerializer`, `MCPRequestLogSerializer`
- **Statistics Serializer**: `MCPStatisticsSerializer`

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (database_uri)
- –í–∞–ª–∏–¥–∞—Ü–∏—è JSON Schema
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –¥–µ—Ç–∞–ª—å–Ω—ã–µ –∏ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã –¥–ª—è —Å–ø–∏—Å–∫–æ–≤

#### 1.4. –£—Ç–∏–ª–∏—Ç—ã (`mcp/utils.py`)

- **`get_openai_llm()`** - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è OpenAI LLM
- **`is_openai_configured()`** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ OpenAI
- **`get_llm_for_sql_toolkit()`** - –ü–æ–ª—É—á–µ–Ω–∏–µ LLM –¥–ª—è SQL Toolkit
- **`format_sql_result()`** - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ SQL
- **`validate_sql_query()`** - –ë–∞–∑–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è SQL (–∑–∞—â–∏—Ç–∞ –æ—Ç DROP, DELETE, etc.)
- **`parse_table_list()`** - –ü–∞—Ä—Å–∏–Ω–≥ —Å–ø–∏—Å–∫–∞ —Ç–∞–±–ª–∏—Ü
- **`create_mcp_error_response()`** - –°–æ–∑–¥–∞–Ω–∏–µ MCP-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö –æ—à–∏–±–æ–∫
- **`MCP_ERROR_CODES`** - –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∫–æ–¥–æ–≤ –æ—à–∏–±–æ–∫ JSON-RPC 2.0

#### 1.5. URL –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è (`mcp/urls.py`)

```
/api/mcp/
‚îú‚îÄ‚îÄ protocol/              # MCP Protocol (JSON-RPC 2.0)
‚îú‚îÄ‚îÄ deep-query/            # –¶–µ–ø–æ—á–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
‚îú‚îÄ‚îÄ quick/
‚îÇ   ‚îú‚îÄ‚îÄ explore/           # –ë—ã—Å—Ç—Ä–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ query/             # –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—Ä–æ—Å
‚îú‚îÄ‚îÄ statistics/            # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îú‚îÄ‚îÄ databases/             # CRUD –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
‚îú‚îÄ‚îÄ executions/            # –ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π
‚îú‚îÄ‚îÄ tools/                 # –°—Ö–µ–º—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ sessions/              # –°–µ—Å—Å–∏–∏
‚îî‚îÄ‚îÄ logs/                  # –õ–æ–≥–∏
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `backend/urls.py` –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –º–∞—Ä—à—Ä—É—Ç—ã MCP –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è!

#### 1.6. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (`backend/settings.py`)

- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ .env)
- **OpenAI:** API –∫–ª—é—á, –º–æ–¥–µ–ª—å (gpt-4o-mini), temperature
- **LangChain:** Tracing (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è:** `mcp`, `telegram`, `rest_framework`
- **DEBUG:** True (‚ö†Ô∏è –Ω–µ –¥–ª—è production!)

---

### 2. Frontend (React)

#### 2.1. –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

- **–§—Ä–µ–π–º–≤–æ—Ä–∫:** React 19.2.0 + TypeScript
- **–°–±–æ—Ä—â–∏–∫:** Vite 7.2.2
- **–°—Ç–∏–ª–∏:** Tailwind CSS 3.4.18
- **–°–æ—Å—Ç–æ—è–Ω–∏–µ:** –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –Ω–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å backend

#### 2.2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
frontend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx           # –ë–∞–∑–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (–ø—Ä–∏–º–µ—Ä Vite)
‚îÇ   ‚îú‚îÄ‚îÄ main.tsx          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ assets/
‚îî‚îÄ‚îÄ package.json
```

**–ü—Ä–æ–±–ª–µ–º–∞:** Frontend –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ backend API!

---

### 3. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

#### 3.1. Docker Compose

- **PostgreSQL 15** –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ .env
- Volume –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

#### 3.2. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**Backend (`requirements.txt`):**
- Django 5.2.8
- djangorestframework 3.16.1
- langchain-community, langchain-core, langchain-openai
- openai
- psycopg2 (PostgreSQL –¥—Ä–∞–π–≤–µ—Ä)
- aiogram (Telegram, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

**Frontend (`package.json`):**
- React 19.2.0
- TypeScript 5.9.3
- Vite 7.2.2
- Tailwind CSS 3.4.18

---

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
1. **OpenAI API** - –î–ª—è LLM –æ–ø–µ—Ä–∞—Ü–∏–π (SQL –≥–µ–Ω–µ—Ä–∞—Ü–∏—è, –∞–Ω–∞–ª–∏–∑)
2. **PostgreSQL** - –û—Å–Ω–æ–≤–Ω–∞—è –ë–î –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. **SQL Databases** - –í–Ω–µ—à–Ω–∏–µ –ë–î –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ (—á–µ—Ä–µ–∑ LangChain)

### –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏
1. **LangChain** - SQL Toolkit –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
2. **Django REST Framework** - REST API
3. **React** - Frontend —Ñ—Ä–µ–π–º–≤–æ—Ä–∫

---

## ‚ö†Ô∏è –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ

1. **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞**
   - `backend/urls.py` –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã MCP –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - API endpoints –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã

2. **Frontend –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω**
   - –ù–µ—Ç API –∫–ª–∏–µ–Ω—Ç–∞
   - –ù–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å MCP
   - –ù–µ—Ç —Ä–æ—É—Ç–∏–Ω–≥–∞

3. **Telegram –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—É—Å—Ç–æ–µ**
   - –ú–æ–¥–µ–ª–∏ –∏ views –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
   - –ù–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å `aiogram` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞

### –í–∞–∂–Ω—ã–µ

4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
   - `DEBUG = True` –≤ production –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
   - –ù–µ—Ç CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–¥–ª—è frontend)
   - –ù–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏/–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - SQL –≤–∞–ª–∏–¥–∞—Ü–∏—è –±–∞–∑–æ–≤–∞—è (–º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å)

5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
   - –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
   - –ù–µ—Ç rate limiting
   - –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —É—Ä–æ–≤–Ω–µ middleware

6. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
   - –ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
   - –ù–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö ViewSets
   - –ù–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ (select_related, prefetch_related)

### –£–ª—É—á—à–µ–Ω–∏—è

7. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ù–µ—Ç unit —Ç–µ—Å—Ç–æ–≤
   - –ù–µ—Ç integration —Ç–µ—Å—Ç–æ–≤
   - –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ API

8. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
   - –ù–µ—Ç API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (Swagger/OpenAPI)
   - –ù–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ –∫–æ–¥–µ (—á–∞—Å—Ç–∏—á–Ω–æ)
   - README –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

9. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - –ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (–∫—Ä–æ–º–µ –º–æ–¥–µ–ª–µ–π)
   - –ù–µ—Ç –º–µ—Ç—Ä–∏–∫
   - –ù–µ—Ç health check endpoints

10. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
    - –ù–µ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è settings –¥–ª—è dev/prod
    - –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

---

## ‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
   - –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏ (models, views, serializers)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ViewSets –¥–ª—è CRUD
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ JSON-RPC 2.0 –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

2. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**
   - –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ MCP –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LangChain SQL Toolkit
   - –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ç—Ä–µ–∫–∏–Ω–≥

3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**
   - –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ `MCPToolSchema`
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ë–î –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

4. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - –¢—Ä–µ–∫–∏–Ω–≥ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
   - –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- **7 –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π**
- **15+ –ø–æ–ª–µ–π —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏**
- **–°–≤—è–∑–∏:** ForeignKey –º–µ–∂–¥—É Request/Response, Session/Database, Execution/Database

### API Endpoints
- **1 MCP Protocol endpoint**
- **3 Quick/Deep Query endpoints**
- **5 ViewSets** (CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏)
- **1 Statistics endpoint**

### –ö–æ–¥
- **Backend:** ~1500+ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
- **Models:** 323 —Å—Ç—Ä–æ–∫–∏
- **Views:** 940 —Å—Ç—Ä–æ–∫
- **Serializers:** 481 —Å—Ç—Ä–æ–∫–∞

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö—Ä–∏—Ç–∏—á–Ω–æ)

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é**
   ```python
   # backend/urls.py
   urlpatterns = [
       path('admin/', admin.site.urls),
       path('api/mcp/', include('mcp.urls')),
   ]
   ```

2. **–î–æ–±–∞–≤–∏—Ç—å CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**
   ```python
   INSTALLED_APPS += ['corsheaders']
   MIDDLEWARE += ['corsheaders.middleware.CorsMiddleware']
   CORS_ALLOWED_ORIGINS = ['http://localhost:5173']  # Vite dev server
   ```

3. **–°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π API –∫–ª–∏–µ–Ω—Ç –¥–ª—è frontend**
   - Axios/Fetch wrapper
   - –¢–∏–ø–∏–∑–∞—Ü–∏—è TypeScript
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–í–∞–∂–Ω–æ)

4. **–î–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é**
   - JWT —Ç–æ–∫–µ–Ω—ã –∏–ª–∏ Django Session Auth
   - Permissions –¥–ª—è ViewSets

5. **–£–ª—É—á—à–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
   - SQL injection –∑–∞—â–∏—Ç–∞ (—Ä–∞—Å—à–∏—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é)
   - Rate limiting
   - Input sanitization

6. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - Unit —Ç–µ—Å—Ç—ã –¥–ª—è utils
   - API —Ç–µ—Å—Ç—ã –¥–ª—è endpoints
   - Integration —Ç–µ—Å—Ç—ã –¥–ª—è —Ü–µ–ø–æ—á–µ–∫

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ)

7. **–î–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API**
   - drf-spectacular –∏–ª–∏ drf-yasg
   - Swagger UI

8. **–£–ª—É—á—à–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ü–∞–≥–∏–Ω–∞—Ü–∏—è –≤–µ–∑–¥–µ
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î

9. **–î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (structlog)
   - Health check endpoint
   - –ú–µ—Ç—Ä–∏–∫–∏ (Prometheus)

10. **–†–∞–∑–¥–µ–ª–∏—Ç—å settings**
    - `settings/base.py`
    - `settings/development.py`
    - `settings/production.py`

---

## üìà –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª —Ä–∞–∑–≤–∏—Ç–∏—è

1. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ –ë–î (MongoDB, Redis)
   - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ SQL
   - –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö (CSV, JSON, Excel)

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**
   - Telegram –±–æ—Ç (—É–∂–µ –µ—Å—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
   - WebSocket –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
   - Webhooks –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º

3. **AI –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SQL –∏–∑ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é —Å—Ö–µ–º—ã –ë–î

4. **UI/UX**
   - Dashboard —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
   - SQL —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
   - –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–≤—Ç–æ—Ä–∞

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –¢–µ–∫—É—â–∏–µ –º–µ—Ä—ã
- ‚úÖ –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ database_uri –≤ API
- ‚úÖ –ë–∞–∑–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è SQL (–∑–∞—â–∏—Ç–∞ –æ—Ç DROP/DELETE)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ LangChain

### –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å
- ‚ùå –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚ùå Rate limiting
- ‚ùå CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚ùå Input validation middleware
- ‚ùå SQL injection –∑–∞—â–∏—Ç–∞ (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è)
- ‚ùå –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π **MCP —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å SQL –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö** —Å —Ö–æ—Ä–æ—à–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é. –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ, –Ω–æ –µ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–µ–ª—ã –≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è, frontend) –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

**–û—Ü–µ–Ω–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- Backend —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å: **85%** ‚úÖ
- Backend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: **30%** ‚ö†Ô∏è
- Frontend: **10%** ‚ö†Ô∏è
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: **40%** ‚ö†Ô∏è
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: **0%** ‚ùå
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: **20%** ‚ö†Ô∏è

**–û–±—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å: ~45%**

–°–∏—Å—Ç–µ–º–∞ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, –Ω–æ –∏–º–µ–µ—Ç —Å–æ–ª–∏–¥–Ω—É—é –æ—Å–Ω–æ–≤—É –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è.

